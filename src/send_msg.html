<!DOCTYPE html>
<html>
<head>
<title>ç¶²é è¨Šæ¯é€šçŸ¥</title>
<meta charset="UTF-8">
<style>
body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 50px;
}
#notificationInput {
    padding: 10px;
    margin-bottom: 10px;
    width: 300px;
    border: 1px solid #ccc;
    border-radius: 4px;
}
#sendButton {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
#sendButton:hover {
    background-color: #45a049;
}
</style>
</head>
<body>

<h2>ç¶²é è¨Šæ¯é€šçŸ¥ ğŸ“¢</h2>
<input type="text" id="notificationInput" placeholder="è¼¸å…¥é€šçŸ¥è¨Šæ¯...">
<button id="sendButton">ç™¼é€é€šçŸ¥</button>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const notificationInput = document.getElementById('notificationInput');
        const sendButton = document.getElementById('sendButton');

        // æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦æ”¯æ´ Notifications API
        if (!("Notification" in window)) {
            alert("ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´æ¡Œé¢é€šçŸ¥åŠŸèƒ½ã€‚");
            sendButton.disabled = true;
            return;
        }

        // è«‹æ±‚é€šçŸ¥æ¬Šé™çš„å‡½å¼ (åªä¿ç•™é€™ä¸€å€‹)
        function requestNotificationPermission() {
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    console.log("é€šçŸ¥æ¬Šé™å·²ç²å–ï¼");
                } else {
                    console.warn("é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•ã€‚");
                    // ç¬¬ä¸€æ¬¡è¢«æ‹’çµ•æ™‚æé†’ä½¿ç”¨è€…
                    alert("ä½ éœ€è¦å…è¨±é€šçŸ¥æ‰èƒ½æ”¶åˆ°è¨Šæ¯ã€‚");
                }
            });
        }

        // ç™¼é€é€šçŸ¥çš„å‡½å¼
        function sendNotification(message) {
            // åœ¨ç™¼é€å‰å†æ¬¡ç¢ºèªæ¬Šé™ç‹€æ…‹
            if (Notification.permission === "granted") {
                const notification = new Notification("æ–°è¨Šæ¯ï¼", {
                    body: message
                });

                notification.onclick = function () {
                    window.focus();
                    this.close();
                };
            } else {
                // å¦‚æœæ¬Šé™ä¸æ˜¯ 'granted'ï¼Œå¼•å°ä½¿ç”¨è€…å»è«‹æ±‚
                alert("è«‹å…ˆå…è¨±é€šçŸ¥æ¬Šé™ã€‚");
                requestNotificationPermission(); // å†æ¬¡ç™¼èµ·è«‹æ±‚
            }
        }

        // æŒ‰éˆ•é»æ“Šäº‹ä»¶
        sendButton.addEventListener('click', () => {
            const message = notificationInput.value.trim();
            if (message) {
                // ã€å„ªåŒ–ã€‘å°‡æ¬Šé™æª¢æŸ¥å’Œç™¼é€é‚è¼¯éƒ½æ”¾åœ¨é»æ“Šäº‹ä»¶è£¡
                // å¦‚æœæ¬Šé™å·²ç¶“æ˜¯ grantedï¼Œæœƒç›´æ¥ç™¼é€
                // å¦‚æœæ˜¯ defaultï¼Œæœƒå…ˆè«‹æ±‚æ¬Šé™ï¼Œä½¿ç”¨è€…åŒæ„å¾Œéœ€å†é»ä¸€æ¬¡æŒ‰éˆ•
                // å¦‚æœæ˜¯ deniedï¼Œæœƒæç¤ºä½¿ç”¨è€…
                if (Notification.permission === 'denied') {
                    alert("é€šçŸ¥æ¬Šé™å…ˆå‰å·²è¢«æ‹’çµ•ï¼Œè«‹åˆ°ç€è¦½å™¨è¨­å®šä¸­æ‰‹å‹•é–‹å•Ÿã€‚");
                    return;
                }
                sendNotification(message);
                notificationInput.value = ""; // æ¸…ç©ºè¼¸å…¥æ¡†
            } else {
                alert("è«‹è¼¸å…¥é€šçŸ¥è¨Šæ¯ï¼");
            }
        });
    });
</script>
</body>
</html>